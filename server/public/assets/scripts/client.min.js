/*! personal_project 2016-05-06 */
function addDisplayDates(a){for(var b="dddd, MMMM D, h:mm a",c=0;c<a.length;c++)a[c].startDisplay=moment(a[c].start_time).format(b),a[c].endDisplay=moment(a[c].end_time).format(b);return a}var app=angular.module("childcareApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/open.html",controller:"OpenController",controllerAs:"open"}).when("/open",{templateUrl:"views/open.html",controller:"OpenController",controllerAs:"open"}).when("/commitments",{templateUrl:"views/commitments.html",controller:"CommitmentController",controllerAs:"commitments"}).when("/requests",{templateUrl:"views/requests.html",controller:"RequestController",controllerAs:"requests"}),b.html5Mode(!0)}]),app.controller("IndexController",["$http",function(a){var b=this;b.getUserInfo=function(){console.log("about to get user info"),a.get("/users/info").then(function(a){console.log("got user info"),b.loggedInUser=a.data}),b.getUserInfo()}}]),app.controller("OpenController",["$http",function(a){var b=this;b.requestList=[],b.getOpenRequests=function(){a.get("/requests/open").then(function(a){b.requestList=addDisplayDates(a.data)})},b.assignRequest=function(a){$.ajax({method:"put",url:"/requests/assign",data:{request_id:a,user_id:b.user.id}}).done(function(a){b.getOpenRequests()})},b.getOpenRequests()}]),app.controller("CommitmentController",function(){}),app.controller("RequestController",function(){});